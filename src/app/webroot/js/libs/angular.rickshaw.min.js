angular.module("angular-rickshaw",[]).directive("rickshaw",function(g){return{restrict:"EA",scope:{options:"=rickshawOptions",series:"=rickshawSeries",features:"=rickshawFeatures"},link:function(a,l,m){function d(){var f=angular.element(l);f.append(b);f.empty();var b=g("<div></div>")(a);f.append(b);var c=b[0],b=angular.copy(a.options);b.element=c;b.series=a.series;e=new Rickshaw.Graph(b);a.features&&a.features.hover&&(c={graph:e},c.xFormatter=a.features.hover.xFormatter,c.yFormatter=a.features.hover.yFormatter,
c.formatter=a.features.hover.formatter,new Rickshaw.Graph.HoverDetail(c));if(a.features&&a.features.palette)for(var c=new Rickshaw.Color.Palette({scheme:a.features.palette}),d=0;d<b.series.length;d++)b.series[d].color=c.color();e.render();a.features&&a.features.xAxis&&(b={graph:e},a.features.xAxis.timeUnit&&(c=new Rickshaw.Fixtures.Time,b.timeUnit=c.unit(a.features.xAxis.timeUnit)),a.features.xAxis.tickFormat&&(b.tickFormat=a.features.xAxis.tickFormat),(!1===a.features.xAxis.time?new Rickshaw.Graph.Axis.X(b):
new Rickshaw.Graph.Axis.Time(b)).render());a.features&&a.features.yAxis&&(b={graph:e},a.features.yAxis.tickFormat&&(b.tickFormat=Rickshaw.Fixtures.Number[a.features.yAxis.tickFormat]),(new Rickshaw.Graph.Axis.Y(b)).render());a.features&&a.features.legend&&(b=g("<div></div>")(a),f.append(b),f=new Rickshaw.Graph.Legend({graph:e,element:b[0]}),a.features.legend.toggle&&new Rickshaw.Graph.Behavior.Series.Toggle({graph:e,legend:f}),a.features.legend.highlight&&new Rickshaw.Graph.Behavior.Series.Highlight({graph:e,
legend:f}))}var e,n=a.$watch("options",function(a,b){angular.equals(a,b)||d()}),p=a.$watch(function(a){if(a.features&&a.features.directive&&a.features.directive.watchAllSeries){for(var b={},c=0;c<a.series.length;c++)b["series"+c]=a.series[c].data;return b}return a.series[0].data},function(a,b){angular.equals(a,b)||d()},!0),q=a.$watch("features",function(a,b){angular.equals(a,b)||d()}),h=0,k=0,r=a.$watch(function(){h=$(window).innerWidth();k=$(window).innerHeight();return h*k},d);a.$on("$destroy",
function(){n();p();q();r()});d()},controller:function(a,g,m){}}});
